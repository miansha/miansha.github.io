---
title: 网络那些事
date: 2019-04-16 22:21:51
tags:
- 网络
- HTTP
- HTTPS
- UDP
- TCP
- IP
categories:
- 后台
---

## 什么 OSI 模型？

[OSI模型](https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B)（Open System Interconnection Reference Model，缩写为OSI）,全名**“开放式系统互联通信参考模型”**，是一个试图使各种计算机在全世界范围内互联为网络的标准框架。

1983年，国际标准组织（ISO）发布了著名的ISO/IEC 7498标准，<span style="color: #f44336">它定义了网络互联的7层框架，也就是开放式系统互联参考模型。</span>

<!-- more -->

## 什么是 OSI 七层模型?

建立七层模型的主要目的是为<span style="color: #f44336">解决异种网络互连时所遇到的兼容性问题。</span>它的最大优点是将服务、接口和协议这三个概念明确地区分开来：

- 服务说明某一层为上一层提供一些什么功能；

- 接口说明上一层如何使用下层的服务；

- 而协议涉及如何实现本层的服务。

这样各层之间具有很强的独立性，互连网络中各实体采用什么样的协议是没有限制的，只要向上提供相同的服务并且不改变相邻层的接口就可以了。

从上到下：<span style="color: #f44336">应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。</span>

**应用层**：主要是一些终端的应用，比如说 FTP（各种文件下载），WEB（IE浏览），QQ 之类的（你就把它理解成我们在电脑屏幕上可以看到的东西．就 是终端应用）。

**表示层**：可确保一个系统的应用层所发送的信息可以被另一个系统的应用层读取。例如，PC程序与另一台计算机进行通信，其中一台计算机使用扩展二一十进制交换码（EBCDIC），而另一台则使用美国信息交换标准码（ASCII）来表示相同的字符。如有必要，表示层会通过使用一种通格式来实现多种数据格式之间的转换。

**会话层**：通过传输层（端口号：传输端口与接收端口）建立数据传输的通路。主要在你的系统之间发起会话或或者接受会话请求（设备之间需要互相认识可以是 IP 也可以是 MAC 或者是主机名）。

**传输层**：定义了一些传输数据的协议和端口号（WWW 端口 80 等），如：TCP（传输控制协议，传输效率低，可靠性强，用于传输可靠性要求高，数据量大的数据），UDP（用户数据报协议，与 TCP 特性恰恰相反，用于传输可靠性要求不高，数据量小的数据，如 QQ 聊天数据就是通过这种方式传输的）。主要是将从下层接收的数据进行分段进行传输，到达目的地址后在进行重组。常常把这一层数据叫做段。

**网络层**：在位于不同地理位置的网络中的两个主机系统之间提供连接和路径选择。Internet的发展使得从世界各站点访问信息的用户数大大增加，而网络层正是管理这种连接的层。

**数据链路层**：定义了如何让格式化数据以进行传输，以及如何让控制对物理介质的访问。这一层通常还提供错误检测和纠正，以确保数据的可靠传输。

**物理层**：主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等。它的主要作用是传输比特流（就是由1、0转化为电流强弱来进行传输,到达目的地后在转化为1、0，也就是我们常说的数模转换与模数转换）。这一层的数据叫做比特。

![OSI 七层模型和 TCP/IP 四层模型](https://i.loli.net/2019/06/17/5d074c764dc7891753.png)

## 什么是 TCP/IP 四层模型？

TCP/IP 是一组协议的代名词，它还包括许多协议，组成了 **TCP/IP 协议簇**。TCP/IP 协议簇分为四层，IP 位于协议簇的第二层(对应 OSI 的第三层)，TCP位于协议簇的第三层(对应 OSI 的第四层)。

TCP/IP通讯协议采用了4层的层级结构，每一层都呼叫它的下一层所提供的网络来完成自己的需求。TCP/IP 由四个层次组成：<span style="color: #f44336">应用层、传输层、网络层、网络接口层。</span>

**应用层**：应用程序间沟通的层，如简单电子邮件传输（SMTP）、文件传输协议（FTP）、网络远程访问协议（Telnet）等。 

**传输层**：它提供了节点间的数据传送服务，如传输控制协议（TCP）、用户数据报协议（UDP）等，TCP和UDP给数据包加入传输数据并把它传输到下一层中，这一层负责传送数据，并且确定数据已被送达并接收。 

**网络层**：负责提供基本的数据封包传送功能，让每一块数据包都能够到达目的主机（但不检查是否被正确接收），如网际协议（IP）。 

**网络接口层**：负责将数据转换为数字信号在物理设备之间传输。



## 说说TCP的三次握手？

“握手“是为了**建立连接**，TCP 三次握手的流程图如下：

- 第一次握手：建立连接时，客户发送 SYN 包[syn=j]到服务器，并进入 SYN_SEND 状态，等待服务器确认；
- 第二次握手：服务收到 SYN 包，必须确认客户的SYN[ack=j+1]，同时自己也发送一个 SYN 包[syn=k]，即 SYN+ACK 包此时务器进入 SYN_RECV 状态；

- 第三次握手：客户收到服务的 SYN+ACK 包，向服务器发送确认包ACK[ack=k+1]，包发送完毕，客户端和服务器进入 ESTABLISHED 状态，完成三次握手。

## 谈谈 TCP 的四次挥手？

“挥手“是为了**终止连接**，TCP 四次挥手的流程图如下：

- 第一次挥手：Client 发送一个 FIN，用来关团 Client 到 Server 的数据传送，Client 进入 FIN_WAIT_1 状态；

- 第二次挥手：Server 收到 FIN 后，发送一个 ACK 给 Client，确认序号的收到序号+1（与 SYN 相同，一个 FIN 占用一个序号），Server 进入 CLOSE_WAIT 状态；

- 第三次挥手：Server 发送一个 FIN．用来关闭 Server 到 Client 的数据传送，Server 进入 LAST_ACK 状态；
- 第四次挥手：Client 收到 FIN 后，Client 进入 TIME_WAIT 状态，接着发送一个 ACK 给 Server,确认序号为收到序号+1，Server 进入 CLOSED 状态，完成四次挥手。

## 说说TCP 和 UDP 的区别？

TCP 和 UDP 的区别：

- TCP 是面向连接的，UDP 是面向无连接的
- UDP程序结构较简单
- TCP 是面向字节流的，UDP 是基于数据报的
- TCP 保证数据正确性，UDP 可能丢包
- TCP 保证数据顺序，UDP 不保证



## TCP 为什么是可靠连接？

可靠连接：

- 通过 TCP 连接传输的数据无差错，不丢失，不重复，且按顺序到达。
- TCP 报文头里面的序号能使 TCP 的数据按序到达
- 报文头里面的确认序号能保证不丢包，累计确认及超时重传机制
- TCP 拥有流量控制及拥塞控制的机制



##  说说你常见 HTTP 状态码？

常见HTTP状态码：

- 200 OK：正常返回信息
- 400 Bad Request：客户端请求有语法错误，不能被服务器所理解
- 401 Unauthorized：请求未经授权，这个状态代码必须和 WWW-Authenticate 报头域一起使用
- 403 Forbidden：服务器收到请求，但是拒绝提供服务
- 404 NotFound：请求资源不存在，eg，输入了错误的URL
- 500 Internal Server Error：服务器发生不可预期的错误
- 503 Server Unavailable：服务器当前不能处理客户斕的请求，一段时间后可能恢复正常



## GET 请求和 POST 请求的区别？

区别：

- Http 报文层面：GET 将请求信息放在 URL，POST 放在报文体中
- 数据库层面：CET 符合幕等性和安全性，POST 不符合
- 其他层面：GET 可以被缓存、被存储，而 POST 不行

## Cookie 和 Session 的区别？

区别：

- Cookie 数据存放在客户的浏览器上，Session 数据放在服务器上
- Session 对于 Cookie 安全
- 若考咸轻服务器负担，应当使用Cookie



## HTTP 与 HTTPS 有什么区别？

区别：

- HTTPS密文传输，HTTP明文传输
- 连接方式不同，HTTPS默认使用443端口，HTTP使用80端口
- HTTPS=HTTP+加密+认证+完整性保护，较HTTP安全

## 谈谈 CDN 加速原理？
CDN 之所以快靠的是<span style="color: #f44336">多节点、多线路、用缓存</span>；

- 多节点，也就是多服务器，这样让用户没必要直接向源站请求资源，而是向最近的服务器请求就行了；
- 多线路，避免了跨线路互联不互通的尴尬；
- 用缓存，CDN 服务器会从源站拉取资源并缓存到内存中，当用户访问的时候直接从内存中取出来，这样就比从硬盘中去出来快了不少；其次 CDN 服务器知道源站资源发生变化后，会通知其它服务器同时更新资源。

<span style="color: #f44336">持续更新中...</span>

<img src="/images/Come on/Come on3.gif">
